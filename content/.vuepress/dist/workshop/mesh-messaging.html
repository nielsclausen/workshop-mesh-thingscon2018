<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Messaging in the mesh | IoT Workshop – Particle Mesh</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.29dd6f97.css" as="style"><link rel="preload" href="/assets/js/app.84ee4854.js" as="script"><link rel="preload" href="/assets/js/10.4af3f0f1.js" as="script"><link rel="preload" href="/assets/js/2.d4be922b.js" as="script"><link rel="prefetch" href="/assets/js/11.d3895582.js"><link rel="prefetch" href="/assets/js/12.10035fab.js"><link rel="prefetch" href="/assets/js/13.897a14a8.js"><link rel="prefetch" href="/assets/js/3.3e94de84.js"><link rel="prefetch" href="/assets/js/4.d49fead5.js"><link rel="prefetch" href="/assets/js/5.c15c5695.js"><link rel="prefetch" href="/assets/js/6.dad0b06d.js"><link rel="prefetch" href="/assets/js/7.399d6cec.js"><link rel="prefetch" href="/assets/js/8.29220501.js"><link rel="prefetch" href="/assets/js/9.48cbebae.js">
    <link rel="stylesheet" href="/assets/css/0.styles.29dd6f97.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">IoT Workshop – Particle Mesh</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.reflektor.dk/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Reflektor
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://particle.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Particle
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/nielsclausen/workshop-mesh-thingscon2018" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://www.reflektor.dk/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Reflektor
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://particle.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Particle
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/nielsclausen/workshop-mesh-thingscon2018" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/workshop/" class="sidebar-link">Introduction</a></li><li><a href="/workshop/prerequisites.html" class="sidebar-link">Preparations</a></li><li><a href="/workshop/box-to-blinky.html" class="sidebar-link">1 – From Box to Blinky</a></li><li><a href="/workshop/grove-kit-distance-display.html" class="sidebar-link">2 – Measuring a distance</a></li><li><a href="/workshop/mesh-messaging.html" class="active sidebar-link">3 – Working in the Mesh</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/workshop/mesh-messaging.html#setting-up-the-mesh-network" class="sidebar-link">Setting up the mesh network</a></li><li class="sidebar-sub-header"><a href="/workshop/mesh-messaging.html#sending-receiving-messages" class="sidebar-link">Sending &amp; Receiving messages</a></li></ul></li><li><a href="/workshop/mesh-distance-display.html" class="sidebar-link">4 – Putting it all together</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="how-to-mesh"><a href="#how-to-mesh" aria-hidden="true" class="header-anchor">#</a> How to Mesh</h1> <div class="sbox-container" data-v-24264f9a><div class="sbox-table" data-v-24264f9a><div class="sbox-row" data-v-24264f9a><div class="sbox-header" data-v-24264f9a>Goal </div> <div class="sbox-content" data-v-24264f9a>Publish and receive messages to/from the mesh.</div></div> <div class="sbox-row" data-v-24264f9a><div class="sbox-header" data-v-24264f9a> Time </div> <div class="sbox-content" data-v-24264f9a> 20 min </div></div> <div class="sbox-row" data-v-24264f9a><div class="sbox-header" data-v-24264f9a> Tools </div> <div class="sbox-content" data-v-24264f9a><ul data-v-24264f9a><li data-v-24264f9a>Argon</li><li data-v-24264f9a>Grove starter kits for Particle mesh</li><li data-v-24264f9a>A partner, also with an Argon + Grove kit</li></ul></div></div></div></div> <p>In this session, we'll leverage a local mesh network to quickly send messages between devices. If you get stuck at any point in the process, you can see the code for the completed lab <a href="http://about:blank" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="partner-up-with-your-neighbour"><a href="#partner-up-with-your-neighbour" aria-hidden="true" class="header-anchor">#</a> Partner up with your neighbour</h3> <p>From now on and the rest of the workshop, it is necessary to cooperate in groups of at least two participants.</p> <p>The code you'll write in this lab will live on your Argon. Each group-members should do their own code for their own device, even if it is the same code for all devices at this point.</p> <div class="tip custom-block"><p class="custom-block-title">Do yo come prepared?</p> <p>It is assumed that you come to this session with an Argon that you are able to program.</p></div> <h2 id="setting-up-the-mesh-network"><a href="#setting-up-the-mesh-network" aria-hidden="true" class="header-anchor">#</a> Setting up the mesh network</h2> <blockquote><p>Can two devices on different accounts actually be on the same mesh network? If not, we need to figure out how to proceed. Should both participants code on the same computer then?</p></blockquote> <h2 id="sending-receiving-messages"><a href="#sending-receiving-messages" aria-hidden="true" class="header-anchor">#</a> Sending &amp; Receiving messages</h2> <p>Let us take a look at two of the newest functions provided by Particle: <code>Mesh.publish()</code> and <code>Mesh.subscribe()</code>. These primitives allow you to send and receive messages within a Particle Mesh network.</p> <p>Create a new app in the <a href="https://build.particle.io/build/new" target="_blank" rel="noopener noreferrer">Particle Web IDE<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, name it <em>MeshPubSubTest.ino</em> or come up with a more creative name.</p> <h3 id="sending-messages"><a href="#sending-messages" aria-hidden="true" class="header-anchor">#</a> Sending messages</h3> <p>On using <code>Mesh.publish()</code>...</p> <h3 id="receiving-messages"><a href="#receiving-messages" aria-hidden="true" class="header-anchor">#</a> Receiving messages</h3> <p>On using <code>Mesh.subscribe()</code>...</p> <p>Congratulations, you are now able to send/receive messages to/from the mesh network. Easy, right?</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/workshop/grove-kit-distance-display.html" class="prev">
          2 – Measuring a distance
        </a></span> <span class="next"><a href="/workshop/mesh-distance-display.html">
          4 – Putting it all together
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/10.4af3f0f1.js" defer></script><script src="/assets/js/2.d4be922b.js" defer></script><script src="/assets/js/app.84ee4854.js" defer></script>
  </body>
</html>
